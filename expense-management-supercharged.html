<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExpenseFlow - Modern Expense Management</title>
    
    <!-- Modern Font: DM Sans (distinctive, elegant, and readable) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.js"></script>
    
    <style>
        :root {
            --color-background: #0a0a0f;
            --color-surface: #16161d;
            --color-surface-elevated: #1e1e28;
            --color-border: #2a2a35;
            --color-border-hover: #3a3a45;
            
            --color-primary: #00d4aa;
            --color-primary-glow: rgba(0, 212, 170, 0.15);
            --color-primary-dark: #00b894;
            
            --color-accent-1: #ff6b9d;
            --color-accent-2: #ffd93d;
            --color-accent-3: #6c5ce7;
            
            --color-text-primary: #ffffff;
            --color-text-secondary: #a0a0b2;
            --color-text-tertiary: #6a6a7a;
            
            --color-success: #00d4aa;
            --color-warning: #ffd93d;
            --color-pending: #6c5ce7;
            --color-error: #ff6b9d;
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px var(--color-primary-glow);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            --font-display: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'Space Mono', monospace;
            
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 400ms cubic-bezier(0.4, 0, 0.2, 1);
            
            --backdrop-blur: blur(12px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-display);
            background: var(--color-background);
            color: var(--color-text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* Animated background gradient mesh */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(108, 92, 231, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 212, 170, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 107, 157, 0.1) 0%, transparent 50%);
            animation: meshMove 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes meshMove {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(5%, 10%) rotate(5deg); }
            66% { transform: translate(-5%, 5%) rotate(-5deg); }
        }

        .app-container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        /* Glassmorphic sidebar */
        .sidebar {
            width: 280px;
            background: rgba(22, 22, 29, 0.7);
            backdrop-filter: var(--backdrop-blur);
            border-right: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
            padding: 32px 0;
            position: relative;
            z-index: 10;
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 1px;
            height: 100%;
            background: linear-gradient(180deg, 
                transparent 0%, 
                var(--color-primary) 50%, 
                transparent 100%);
            opacity: 0.3;
        }

        .logo {
            padding: 0 32px 32px;
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.02em;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent-3));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 0 20px rgba(0, 212, 170, 0.3);
        }

        .nav-item {
            padding: 16px 32px;
            display: flex;
            align-items: center;
            gap: 14px;
            cursor: pointer;
            color: var(--color-text-secondary);
            transition: all var(--transition-base);
            position: relative;
            font-weight: 500;
            font-size: 15px;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 0;
            background: var(--color-primary);
            transition: height var(--transition-base);
            border-radius: 0 3px 3px 0;
        }

        .nav-item:hover {
            color: var(--color-text-primary);
            background: rgba(255, 255, 255, 0.03);
        }

        .nav-item.active {
            color: var(--color-primary);
            background: var(--color-primary-glow);
        }

        .nav-item.active::before {
            height: 28px;
        }

        .nav-icon {
            font-size: 20px;
            transition: transform var(--transition-base);
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.1);
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 48px;
            position: relative;
        }

        /* Custom scrollbar */
        .main-content::-webkit-scrollbar {
            width: 8px;
        }

        .main-content::-webkit-scrollbar-track {
            background: var(--color-surface);
        }

        .main-content::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: 4px;
        }

        .main-content::-webkit-scrollbar-thumb:hover {
            background: var(--color-border-hover);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 48px;
            animation: slideDown 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header-title h1 {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--color-text-primary), var(--color-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
        }

        .header-title p {
            color: var(--color-text-secondary);
            font-size: 16px;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-display);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width var(--transition-slow), height var(--transition-slow);
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            color: var(--color-background);
            box-shadow: 0 4px 16px rgba(0, 212, 170, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 212, 170, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--color-surface-elevated);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            border-color: var(--color-primary);
            background: var(--color-primary-glow);
        }

        .view-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 48px;
            background: var(--color-surface);
            padding: 6px;
            border-radius: var(--radius-md);
            width: fit-content;
            border: 1px solid var(--color-border);
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.1s backwards;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab {
            padding: 12px 32px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: var(--color-text-secondary);
            transition: all var(--transition-base);
            position: relative;
            font-family: var(--font-display);
        }

        .tab.active {
            background: var(--color-primary);
            color: var(--color-background);
            box-shadow: 0 2px 8px rgba(0, 212, 170, 0.3);
        }

        .tab:hover:not(.active) {
            color: var(--color-text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .stat-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: 28px;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-base);
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) backwards;
        }

        .stat-card:nth-child(1) { animation-delay: 0.2s; }
        .stat-card:nth-child(2) { animation-delay: 0.3s; }
        .stat-card:nth-child(3) { animation-delay: 0.4s; }
        .stat-card:nth-child(4) { animation-delay: 0.5s; }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--color-primary), transparent);
            opacity: 0;
            transition: opacity var(--transition-base);
        }

        .stat-card:hover {
            border-color: var(--color-primary);
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-label {
            font-size: 13px;
            color: var(--color-text-tertiary);
            margin-bottom: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-value {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 12px;
            font-family: var(--font-mono);
            letter-spacing: -0.02em;
            background: linear-gradient(135deg, var(--color-text-primary), var(--color-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-subtext {
            font-size: 14px;
            color: var(--color-success);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .stat-subtext.warning {
            color: var(--color-warning);
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .widget {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: 32px;
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .widget::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, var(--color-primary-glow), transparent 70%);
            opacity: 0;
            transition: opacity var(--transition-base);
            pointer-events: none;
        }

        .widget:hover::after {
            opacity: 1;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .widget-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-text-primary);
            letter-spacing: -0.01em;
        }

        .widget-amount {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 12px;
            font-family: var(--font-mono);
            color: var(--color-primary);
        }

        .widget-subtitle {
            font-size: 14px;
            color: var(--color-text-tertiary);
            margin-bottom: 24px;
        }

        .expand-btn {
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            cursor: pointer;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
            color: var(--color-text-secondary);
            transition: all var(--transition-base);
            font-size: 14px;
            font-weight: 600;
        }

        .expand-btn:hover {
            color: var(--color-primary);
            border-color: var(--color-primary);
            background: var(--color-primary-glow);
        }

        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .expense-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--color-primary);
            transform: scaleY(0);
            transition: transform var(--transition-base);
        }

        .expense-item:hover {
            border-color: var(--color-primary);
            transform: translateX(4px);
        }

        .expense-item:hover::before {
            transform: scaleY(1);
        }

        .expense-info {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .expense-name {
            font-weight: 600;
            font-size: 15px;
            color: var(--color-text-primary);
        }

        .expense-meta {
            font-size: 13px;
            color: var(--color-text-tertiary);
            font-family: var(--font-mono);
        }

        .expense-amount {
            font-weight: 700;
            font-size: 18px;
            font-family: var(--font-mono);
            color: var(--color-primary);
        }

        .expense-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .badge {
            padding: 6px 14px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .badge-success {
            background: rgba(0, 212, 170, 0.15);
            color: var(--color-success);
            border: 1px solid var(--color-success);
        }

        .badge-warning {
            background: rgba(255, 217, 61, 0.15);
            color: var(--color-warning);
            border: 1px solid var(--color-warning);
        }

        .badge-pending {
            background: rgba(108, 92, 231, 0.15);
            color: var(--color-pending);
            border: 1px solid var(--color-pending);
        }

        .approve-btn {
            padding: 8px 18px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            background: var(--color-primary);
            color: var(--color-background);
            transition: all var(--transition-base);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .approve-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 212, 170, 0.4);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 12px;
            background: var(--color-surface);
            padding: 32px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-border);
        }

        .calendar-header {
            font-weight: 700;
            padding: 16px;
            text-align: center;
            color: var(--color-text-secondary);
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .calendar-day {
            aspect-ratio: 1;
            padding: 16px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            flex-direction: column;
            gap: 6px;
            background: var(--color-surface-elevated);
            position: relative;
            overflow: hidden;
        }

        .calendar-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, var(--color-primary-glow), transparent);
            opacity: 0;
            transition: opacity var(--transition-base);
        }

        .calendar-day:hover {
            border-color: var(--color-primary);
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .calendar-day:hover::before {
            opacity: 1;
        }

        .calendar-day.has-expense {
            background: var(--color-primary-glow);
            border-color: var(--color-primary);
        }

        .day-number {
            font-weight: 700;
            font-size: 16px;
            color: var(--color-text-primary);
            position: relative;
            z-index: 1;
        }

        .day-amount {
            font-size: 12px;
            color: var(--color-primary);
            font-weight: 700;
            font-family: var(--font-mono);
            position: relative;
            z-index: 1;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeInOverlay 0.3s ease-out;
        }

        @keyframes fadeInOverlay {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-xl);
            padding: 40px;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            animation: slideUpModal 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUpModal {
            from {
                opacity: 0;
                transform: translateY(40px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--color-border);
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-text-primary);
            letter-spacing: -0.02em;
        }

        .modal-close {
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            font-size: 24px;
            cursor: pointer;
            color: var(--color-text-secondary);
            padding: 8px 14px;
            border-radius: var(--radius-sm);
            transition: all var(--transition-base);
            line-height: 1;
        }

        .modal-close:hover {
            color: var(--color-error);
            border-color: var(--color-error);
            background: rgba(255, 107, 157, 0.1);
            transform: rotate(90deg);
        }

        .chart-container {
            background: var(--color-surface);
            padding: 32px;
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-border);
            margin-bottom: 48px;
        }

        .chart-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            border-bottom: 1px solid var(--color-border);
            flex-wrap: wrap;
        }

        .chart-tab {
            padding: 14px 24px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: var(--color-text-secondary);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
            transition: all var(--transition-base);
            font-family: var(--font-display);
        }

        .chart-tab.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .chart-tab:hover:not(.active) {
            color: var(--color-text-primary);
        }

        .date-range-picker {
            display: flex;
            gap: 16px;
            align-items: flex-end;
            margin-bottom: 32px;
            padding: 24px;
            background: var(--color-surface-elevated);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
            flex-wrap: wrap;
        }

        .date-input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex: 1;
            min-width: 180px;
        }

        .date-input-label {
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 15px;
            transition: all var(--transition-base);
            background: var(--color-surface-elevated);
            color: var(--color-text-primary);
            font-family: var(--font-display);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-primary-glow);
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--color-surface-elevated);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 600;
        }

        .role-indicator {
            padding: 4px 10px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-accent-3));
            color: var(--color-background);
            border-radius: var(--radius-sm);
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.05em;
        }

        /* Loading shimmer effect */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        .loading {
            animation: shimmer 2s infinite;
            background: linear-gradient(90deg, 
                var(--color-surface) 0%, 
                var(--color-surface-elevated) 50%, 
                var(--color-surface) 100%);
            background-size: 1000px 100%;
        }

        /* Pulse animation for pending items */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Glow effect */
        .glow {
            box-shadow: 0 0 20px rgba(0, 212, 170, 0.5),
                        0 0 40px rgba(0, 212, 170, 0.3),
                        0 0 60px rgba(0, 212, 170, 0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Sample expense data with historical data
        const initialExpenses = [
            // January 2026 - Week 1 (Dec 29 - Jan 4)
            { id: 1, name: "Rent Payment", amount: 5000, dueDate: "2026-01-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 2, name: "Liquor Supplier - ABC Distributors", amount: 4200, dueDate: "2026-01-02", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 3, name: "Food Supplier - Fresh Foods Ltd", amount: 3100, dueDate: "2026-01-03", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 4, name: "Staff Payroll", amount: 12000, dueDate: "2026-01-04", category: "Payroll", frequency: "weekly", status: "paid" },
            
            // January 2026 - Week 2 (Jan 5-11) - CURRENT WEEK
            { id: 5, name: "Insurance Premium", amount: 1200, dueDate: "2026-01-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 6, name: "Utilities - Hydro One", amount: 850, dueDate: "2026-01-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 7, name: "Liquor Supplier - ABC Distributors", amount: 4500, dueDate: "2026-01-09", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 8, name: "Food Supplier - Fresh Foods Ltd", amount: 3200, dueDate: "2026-01-10", category: "Inventory", frequency: "weekly", status: "approved" },
            { id: 9, name: "Staff Payroll", amount: 12500, dueDate: "2026-01-11", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // January 2026 - Week 3 (Jan 12-18) - NEXT WEEK
            { id: 10, name: "Cleaning Service", amount: 600, dueDate: "2026-01-12", category: "Services", frequency: "weekly", status: "pending" },
            { id: 11, name: "Liquor Supplier - ABC Distributors", amount: 4300, dueDate: "2026-01-14", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 12, name: "Food Supplier - Fresh Foods Ltd", amount: 3400, dueDate: "2026-01-15", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 13, name: "Equipment Lease", amount: 800, dueDate: "2026-01-15", category: "Equipment", frequency: "monthly", status: "pending" },
            { id: 14, name: "Staff Payroll", amount: 12200, dueDate: "2026-01-18", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // January 2026 - Week 4 (Jan 19-25)
            { id: 15, name: "Marketing - Social Media", amount: 500, dueDate: "2026-01-20", category: "Marketing", frequency: "monthly", status: "pending" },
            { id: 16, name: "Liquor Supplier - ABC Distributors", amount: 4400, dueDate: "2026-01-21", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 17, name: "Food Supplier - Fresh Foods Ltd", amount: 3300, dueDate: "2026-01-22", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 18, name: "Staff Payroll", amount: 12300, dueDate: "2026-01-25", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // December 2025 - Week 4 (Dec 22-28) - LAST WEEK
            { id: 19, name: "Liquor Supplier - ABC Distributors", amount: 4100, dueDate: "2025-12-23", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 20, name: "Food Supplier - Fresh Foods Ltd", amount: 3000, dueDate: "2025-12-24", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 21, name: "Staff Payroll", amount: 11800, dueDate: "2025-12-27", category: "Payroll", frequency: "weekly", status: "paid" },
            
            // December 2025 - Week 3 (Dec 15-21)
            { id: 22, name: "Liquor Supplier - ABC Distributors", amount: 3900, dueDate: "2025-12-16", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 23, name: "Food Supplier - Fresh Foods Ltd", amount: 2900, dueDate: "2025-12-17", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 24, name: "Staff Payroll", amount: 11500, dueDate: "2025-12-20", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 25, name: "Equipment Maintenance", amount: 450, dueDate: "2025-12-18", category: "Equipment", frequency: "monthly", status: "paid" },
            
            // December 2025 - Week 2 (Dec 8-14)
            { id: 26, name: "Liquor Supplier - ABC Distributors", amount: 4000, dueDate: "2025-12-09", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 27, name: "Food Supplier - Fresh Foods Ltd", amount: 2800, dueDate: "2025-12-10", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 28, name: "Staff Payroll", amount: 11600, dueDate: "2025-12-13", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 29, name: "Utilities - Hydro One", amount: 820, dueDate: "2025-12-08", category: "Utilities", frequency: "monthly", status: "paid" },
            
            // December 2025 - Week 1 (Dec 1-7)
            { id: 30, name: "Rent Payment", amount: 5000, dueDate: "2025-12-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 31, name: "Liquor Supplier - ABC Distributors", amount: 3800, dueDate: "2025-12-02", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 32, name: "Food Supplier - Fresh Foods Ltd", amount: 2700, dueDate: "2025-12-03", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 33, name: "Staff Payroll", amount: 11400, dueDate: "2025-12-06", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 34, name: "Insurance Premium", amount: 1200, dueDate: "2025-12-05", category: "Insurance", frequency: "monthly", status: "paid" },
            
            // November 2025 expenses
            { id: 35, name: "Rent Payment", amount: 5000, dueDate: "2025-11-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 36, name: "Insurance Premium", amount: 1200, dueDate: "2025-11-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 37, name: "Utilities - Hydro One", amount: 780, dueDate: "2025-11-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 38, name: "Marketing Campaign", amount: 1500, dueDate: "2025-11-15", category: "Marketing", frequency: "monthly", status: "paid" },
            { id: 39, name: "Equipment Lease", amount: 800, dueDate: "2025-11-15", category: "Equipment", frequency: "monthly", status: "paid" },
            
            // October 2025 expenses
            { id: 40, name: "Rent Payment", amount: 5000, dueDate: "2025-10-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 41, name: "Insurance Premium", amount: 1200, dueDate: "2025-10-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 42, name: "Utilities - Hydro One", amount: 760, dueDate: "2025-10-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 43, name: "Equipment Maintenance", amount: 650, dueDate: "2025-10-12", category: "Equipment", frequency: "quarterly", status: "paid" },
        ];

        const App = () => {
            const [currentView, setCurrentView] = useState('dashboard');
            const [userRole, setUserRole] = useState('manager');
            const [timeView, setTimeView] = useState('weekly');
            const [expenses, setExpenses] = useState(initialExpenses);
            const [expandedWidgets, setExpandedWidgets] = useState({});

            useEffect(() => {
                if (userRole === 'staff' && currentView === 'analytics') {
                    setCurrentView('dashboard');
                }
            }, [userRole, currentView]);

            const toggleWidget = (widget) => {
                setExpandedWidgets(prev => ({
                    ...prev,
                    [widget]: !prev[widget]
                }));
            };

            const approveExpense = (id) => {
                setExpenses(prev => prev.map(exp => 
                    exp.id === id ? { ...exp, status: 'approved' } : exp
                ));
            };

            const getWeekExpenses = (weekOffset) => {
                const today = new Date('2026-01-10');
                const weekStart = new Date(today);
                weekStart.setDate(today.getDate() - today.getDay() + (weekOffset * 7));
                const weekEnd = new Date(weekStart);
                weekEnd.setDate(weekStart.getDate() + 6);

                return expenses.filter(exp => {
                    const expDate = new Date(exp.dueDate);
                    return expDate >= weekStart && expDate <= weekEnd;
                });
            };

            const lastWeekExpenses = getWeekExpenses(-1);
            const thisWeekExpenses = getWeekExpenses(0);
            const nextWeekExpenses = getWeekExpenses(1);

            const lastWeekPaid = lastWeekExpenses.filter(e => e.status === 'paid');
            const lastWeekTotal = lastWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const lastWeekPaidTotal = lastWeekPaid.reduce((sum, e) => sum + e.amount, 0);
            const thisWeekTotal = thisWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const nextWeekTotal = nextWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const pendingApprovals = expenses.filter(e => e.status === 'pending').length;

            return (
                <div className="app-container">
                    <Sidebar 
                        currentView={currentView} 
                        setCurrentView={setCurrentView}
                        userRole={userRole}
                        setUserRole={setUserRole}
                    />
                    <div className="main-content">
                        {currentView === 'dashboard' && (
                            <Dashboard 
                                timeView={timeView}
                                setTimeView={setTimeView}
                                userRole={userRole}
                                expenses={expenses}
                                expandedWidgets={expandedWidgets}
                                toggleWidget={toggleWidget}
                                approveExpense={approveExpense}
                                lastWeekExpenses={lastWeekExpenses}
                                thisWeekExpenses={thisWeekExpenses}
                                nextWeekExpenses={nextWeekExpenses}
                                lastWeekTotal={lastWeekTotal}
                                lastWeekPaidTotal={lastWeekPaidTotal}
                                thisWeekTotal={thisWeekTotal}
                                nextWeekTotal={nextWeekTotal}
                                pendingApprovals={pendingApprovals}
                            />
                        )}
                        {currentView === 'calendar' && (
                            <CalendarView expenses={expenses} />
                        )}
                        {currentView === 'analytics' && userRole === 'manager' && (
                            <AnalyticsView expenses={expenses} />
                        )}
                        {currentView === 'setup' && (
                            <SetupView expenses={expenses} setExpenses={setExpenses} />
                        )}
                    </div>
                </div>
            );
        };

        const Sidebar = ({ currentView, setCurrentView, userRole, setUserRole }) => {
            return (
                <div className="sidebar">
                    <div className="logo">
                        <div className="logo-icon">üíé</div>
                        <span>ExpenseFlow</span>
                    </div>
                    
                    <div style={{ padding: '0 32px 32px' }}>
                        <div className="user-badge">
                            <span>üë§</span>
                            <span>John Doe</span>
                            <span className="role-indicator">
                                {userRole === 'manager' ? 'MANAGER' : 'STAFF'}
                            </span>
                        </div>
                    </div>

                    <div className={`nav-item ${currentView === 'dashboard' ? 'active' : ''}`} 
                         onClick={() => setCurrentView('dashboard')}>
                        <span className="nav-icon">üìä</span>
                        <span>Dashboard</span>
                    </div>
                    
                    <div className={`nav-item ${currentView === 'calendar' ? 'active' : ''}`} 
                         onClick={() => setCurrentView('calendar')}>
                        <span className="nav-icon">üìÖ</span>
                        <span>Calendar View</span>
                    </div>
                    
                    {userRole === 'manager' && (
                        <div className={`nav-item ${currentView === 'analytics' ? 'active' : ''}`} 
                             onClick={() => setCurrentView('analytics')}>
                            <span className="nav-icon">üìà</span>
                            <span>Analytics</span>
                        </div>
                    )}
                    
                    {userRole === 'manager' && (
                        <div className={`nav-item ${currentView === 'setup' ? 'active' : ''}`} 
                             onClick={() => setCurrentView('setup')}>
                            <span className="nav-icon">‚öôÔ∏è</span>
                            <span>Setup</span>
                        </div>
                    )}

                    <div style={{ marginTop: 'auto', padding: '20px 32px', borderTop: '1px solid var(--color-border)' }}>
                        <button 
                            className="btn btn-secondary" 
                            style={{ width: '100%' }}
                            onClick={() => setUserRole(userRole === 'manager' ? 'staff' : 'manager')}
                        >
                            Switch to {userRole === 'manager' ? 'Staff' : 'Manager'}
                        </button>
                    </div>
                </div>
            );
        };

        const Dashboard = ({ 
            timeView, setTimeView, userRole, expenses, 
            expandedWidgets, toggleWidget, approveExpense,
            lastWeekExpenses, thisWeekExpenses, nextWeekExpenses,
            lastWeekTotal, lastWeekPaidTotal, thisWeekTotal, nextWeekTotal,
            pendingApprovals
        }) => {
            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Expense Dashboard</h1>
                            <p>Manage and track restaurant expenses</p>
                        </div>
                        <div className="header-actions">
                            {userRole === 'manager' && (
                                <button className="btn btn-primary">
                                    <span>+</span>
                                    <span>Add Expense</span>
                                </button>
                            )}
                        </div>
                    </div>

                    <div className="view-tabs">
                        <button 
                            className={`tab ${timeView === 'daily' ? 'active' : ''}`}
                            onClick={() => setTimeView('daily')}
                        >
                            Daily
                        </button>
                        <button 
                            className={`tab ${timeView === 'weekly' ? 'active' : ''}`}
                            onClick={() => setTimeView('weekly')}
                        >
                            Weekly
                        </button>
                        <button 
                            className={`tab ${timeView === 'monthly' ? 'active' : ''}`}
                            onClick={() => setTimeView('monthly')}
                        >
                            Monthly
                        </button>
                    </div>

                    {userRole === 'manager' ? (
                        <>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">Last Week Performance</div>
                                    <div className="stat-value">
                                        ${lastWeekPaidTotal.toLocaleString()} / ${lastWeekTotal.toLocaleString()}
                                    </div>
                                    <div className="stat-subtext">
                                        <span>‚úì</span>
                                        {lastWeekTotal > 0 ? Math.round((lastWeekPaidTotal / lastWeekTotal) * 100) : 0}% paid on time
                                    </div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">This Week Total</div>
                                    <div className="stat-value">${thisWeekTotal.toLocaleString()}</div>
                                    <div className="stat-subtext">{thisWeekExpenses.length} expenses</div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">Next Week Planned</div>
                                    <div className="stat-value">${nextWeekTotal.toLocaleString()}</div>
                                    <div className="stat-subtext">{nextWeekExpenses.length} expenses</div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">Pending Approvals</div>
                                    <div className="stat-value" style={{ color: 'var(--color-warning)' }}>{pendingApprovals}</div>
                                    <div className="stat-subtext warning">
                                        <span className="pulse">‚ö†</span>
                                        Need attention
                                    </div>
                                </div>
                            </div>

                            <div className="widgets-grid">
                                <ExpenseWidget 
                                    title="Last Week vs Paid"
                                    amount={lastWeekPaidTotal}
                                    subtitle={`${lastWeekExpenses.length} expenses`}
                                    expenses={lastWeekExpenses}
                                    expanded={expandedWidgets.lastWeek}
                                    onToggle={() => toggleWidget('lastWeek')}
                                    showApprove={false}
                                />

                                <ExpenseWidget 
                                    title="This Week Coming Up"
                                    amount={thisWeekTotal}
                                    subtitle={`${thisWeekExpenses.length} expenses`}
                                    expenses={thisWeekExpenses}
                                    expanded={expandedWidgets.thisWeek}
                                    onToggle={() => toggleWidget('thisWeek')}
                                    onApprove={approveExpense}
                                    showApprove={true}
                                />

                                <ExpenseWidget 
                                    title="Next Week Planned"
                                    amount={nextWeekTotal}
                                    subtitle={`${nextWeekExpenses.length} expenses`}
                                    expenses={nextWeekExpenses}
                                    expanded={expandedWidgets.nextWeek}
                                    onToggle={() => toggleWidget('nextWeek')}
                                    onApprove={approveExpense}
                                    showApprove={true}
                                />
                            </div>
                        </>
                    ) : (
                        <div className="widgets-grid" style={{ gridTemplateColumns: '1fr' }}>
                            <ExpenseWidget 
                                title="This Week Coming Up"
                                amount={thisWeekTotal}
                                subtitle={`${thisWeekExpenses.length} expenses`}
                                expenses={thisWeekExpenses}
                                expanded={true}
                                onToggle={() => {}}
                                showApprove={false}
                                showStatus={true}
                            />
                        </div>
                    )}
                </>
            );
        };

        const ExpenseWidget = ({ 
            title, amount, subtitle, expenses, expanded, onToggle, 
            onApprove, showApprove, showStatus
        }) => {
            return (
                <div className="widget">
                    <div className="widget-header">
                        <div className="widget-title">{title}</div>
                        <button className="expand-btn" onClick={onToggle}>
                            {expanded ? '‚ñº' : '‚ñ∂'}
                        </button>
                    </div>
                    <div className="widget-amount">${amount.toLocaleString()}</div>
                    <div className="widget-subtitle">{subtitle}</div>

                    {expanded && (
                        <div className="expense-list">
                            {expenses.length === 0 ? (
                                <div style={{ textAlign: 'center', color: 'var(--color-text-tertiary)', padding: '32px' }}>
                                    No expenses for this period
                                </div>
                            ) : (
                                expenses.map(expense => (
                                    <div key={expense.id} className="expense-item">
                                        <div className="expense-info">
                                            <div className="expense-name">{expense.name}</div>
                                            <div className="expense-meta">
                                                {expense.category} ‚Ä¢ {new Date(expense.dueDate).toLocaleDateString()}
                                            </div>
                                        </div>
                                        <div className="expense-actions">
                                            <div className="expense-amount">${expense.amount.toLocaleString()}</div>
                                            {showStatus && (
                                                <span className={`badge ${
                                                    expense.status === 'approved' ? 'badge-success' : 
                                                    expense.status === 'paid' ? 'badge-success' : 
                                                    'badge-pending'
                                                }`}>
                                                    {expense.status === 'approved' ? '‚úì Approved' : 
                                                     expense.status === 'paid' ? '‚úì Paid' : 
                                                     'Pending'}
                                                </span>
                                            )}
                                            {showApprove && expense.status === 'pending' && (
                                                <button 
                                                    className="approve-btn"
                                                    onClick={() => onApprove(expense.id)}
                                                >
                                                    Approve
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const CalendarView = ({ expenses }) => {
            const [currentMonth] = useState(new Date('2026-01-01'));
            const [selectedDay, setSelectedDay] = useState(null);
            
            const getDaysInMonth = () => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const days = [];
                
                const firstDayOfWeek = firstDay.getDay();
                for (let i = 0; i < firstDayOfWeek; i++) {
                    days.push(null);
                }
                
                for (let i = 1; i <= lastDay.getDate(); i++) {
                    const date = new Date(year, month, i);
                    const dateStr = date.toISOString().split('T')[0];
                    const dayExpenses = expenses.filter(e => e.dueDate === dateStr);
                    const total = dayExpenses.reduce((sum, e) => sum + e.amount, 0);
                    
                    days.push({
                        date: i,
                        fullDate: dateStr,
                        expenses: dayExpenses,
                        total
                    });
                }
                
                return days;
            };

            const days = getDaysInMonth();
            const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Calendar View</h1>
                            <p>January 2026</p>
                        </div>
                    </div>

                    <div className="calendar-grid">
                        {weekDays.map(day => (
                            <div key={day} className="calendar-header">
                                {day}
                            </div>
                        ))}
                        
                        {days.map((day, index) => (
                            day ? (
                                <div 
                                    key={index} 
                                    className={`calendar-day ${day.expenses.length > 0 ? 'has-expense' : ''}`}
                                    onClick={() => day.expenses.length > 0 && setSelectedDay(day)}
                                    style={{ cursor: day.expenses.length > 0 ? 'pointer' : 'default' }}
                                >
                                    <div className="day-number">{day.date}</div>
                                    {day.total > 0 && (
                                        <>
                                            <div className="day-amount">${day.total.toLocaleString()}</div>
                                            <div style={{ fontSize: '11px', color: 'var(--color-text-tertiary)' }}>
                                                {day.expenses.length} item{day.expenses.length > 1 ? 's' : ''}
                                            </div>
                                        </>
                                    )}
                                </div>
                            ) : (
                                <div key={index}></div>
                            )
                        ))}
                    </div>

                    {selectedDay && (
                        <div className="modal-overlay" onClick={() => setSelectedDay(null)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div>
                                        <div className="modal-title">
                                            {new Date(selectedDay.fullDate).toLocaleDateString('en-US', { 
                                                weekday: 'long', 
                                                year: 'numeric', 
                                                month: 'long', 
                                                day: 'numeric' 
                                            })}
                                        </div>
                                        <p style={{ color: 'var(--color-text-secondary)', marginTop: '8px', fontSize: '16px' }}>
                                            Total: <span style={{ color: 'var(--color-primary)', fontWeight: 700 }}>${selectedDay.total.toLocaleString()}</span>
                                        </p>
                                    </div>
                                    <button className="modal-close" onClick={() => setSelectedDay(null)}>
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="expense-list">
                                    {selectedDay.expenses.map(expense => (
                                        <div key={expense.id} className="expense-item">
                                            <div className="expense-info">
                                                <div className="expense-name">{expense.name}</div>
                                                <div className="expense-meta">
                                                    {expense.category} ‚Ä¢ {expense.frequency}
                                                </div>
                                            </div>
                                            <div className="expense-actions">
                                                <div className="expense-amount">${expense.amount.toLocaleString()}</div>
                                                <span className={`badge ${
                                                    expense.status === 'approved' ? 'badge-success' : 
                                                    expense.status === 'paid' ? 'badge-success' : 
                                                    'badge-pending'
                                                }`}>
                                                    {expense.status === 'approved' ? '‚úì Approved' : 
                                                     expense.status === 'paid' ? '‚úì Paid' : 
                                                     'Pending'}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        const AnalyticsView = ({ expenses }) => {
            const [chartView, setChartView] = useState('weekly');
            const [customStartDate, setCustomStartDate] = useState('2026-01-01');
            const [customEndDate, setCustomEndDate] = useState('2026-01-31');
            const [chartInstance, setChartInstance] = useState(null);

            useEffect(() => {
                const ctx = document.getElementById('expenseChart');
                if (ctx) {
                    if (chartInstance) {
                        chartInstance.destroy();
                    }

                    const { labels, currentData, historicalData } = getChartData();

                    const newChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [
                                {
                                    label: 'Current Period',
                                    data: currentData,
                                    borderColor: '#00d4aa',
                                    backgroundColor: 'rgba(0, 212, 170, 0.1)',
                                    tension: 0.4,
                                    fill: true,
                                    borderWidth: 3
                                },
                                {
                                    label: 'Historical Comparison',
                                    data: historicalData,
                                    borderColor: '#6a6a7a',
                                    backgroundColor: 'rgba(106, 106, 122, 0.05)',
                                    tension: 0.4,
                                    fill: true,
                                    borderWidth: 2,
                                    borderDash: [5, 5]
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top',
                                    labels: {
                                        color: '#a0a0b2',
                                        font: {
                                            family: 'DM Sans',
                                            size: 14
                                        }
                                    }
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                    backgroundColor: 'rgba(22, 22, 29, 0.95)',
                                    titleColor: '#ffffff',
                                    bodyColor: '#a0a0b2',
                                    borderColor: '#2a2a35',
                                    borderWidth: 1
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        color: '#6a6a7a',
                                        callback: function(value) {
                                            return '$' + value.toLocaleString();
                                        }
                                    },
                                    grid: {
                                        color: '#2a2a35'
                                    }
                                },
                                x: {
                                    ticks: {
                                        color: '#6a6a7a'
                                    },
                                    grid: {
                                        color: '#2a2a35'
                                    }
                                }
                            }
                        }
                    });
                    
                    setChartInstance(newChart);
                }

                return () => {
                    if (chartInstance) {
                        chartInstance.destroy();
                    }
                };
            }, [chartView, customStartDate, customEndDate]);

            const getChartData = () => {
                const today = new Date('2026-01-10');
                
                if (chartView === 'weekly') {
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 7; i >= 0; i--) {
                        const weekStart = new Date(today);
                        weekStart.setDate(today.getDate() - today.getDay() - (i * 7));
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        
                        const historicalWeekStart = new Date(weekStart);
                        historicalWeekStart.setDate(weekStart.getDate() - 7);
                        const historicalWeekEnd = new Date(historicalWeekStart);
                        historicalWeekEnd.setDate(historicalWeekStart.getDate() + 6);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= weekStart && date <= weekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalWeekStart && date <= historicalWeekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Week ${8-i}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'monthly') {
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 5; i >= 0; i--) {
                        const monthDate = new Date(today);
                        monthDate.setMonth(today.getMonth() - i);
                        const year = monthDate.getFullYear();
                        const month = monthDate.getMonth();
                        
                        const historicalMonthDate = new Date(monthDate);
                        historicalMonthDate.setFullYear(year - 1);
                        
                        const monthStart = new Date(year, month, 1);
                        const monthEnd = new Date(year, month + 1, 0);
                        
                        const historicalMonthStart = new Date(year - 1, month, 1);
                        const historicalMonthEnd = new Date(year - 1, month + 1, 0);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= monthStart && date <= monthEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalMonthStart && date <= historicalMonthEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(monthDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }));
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'quarterly') {
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 3; i >= 0; i--) {
                        const currentQuarter = Math.floor(today.getMonth() / 3);
                        const targetQuarter = currentQuarter - i;
                        
                        let year = today.getFullYear();
                        let quarter = targetQuarter;
                        
                        while (quarter < 0) {
                            quarter += 4;
                            year -= 1;
                        }
                        
                        const quarterStart = new Date(year, quarter * 3, 1);
                        const quarterEnd = new Date(year, (quarter + 1) * 3, 0);
                        
                        const historicalQuarterStart = new Date(year - 1, quarter * 3, 1);
                        const historicalQuarterEnd = new Date(year - 1, (quarter + 1) * 3, 0);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= quarterStart && date <= quarterEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalQuarterStart && date <= historicalQuarterEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Q${quarter + 1} ${year}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'yearly') {
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 2; i >= 0; i--) {
                        const year = today.getFullYear() - i;
                        const yearStart = new Date(year, 0, 1);
                        const yearEnd = new Date(year, 11, 31);
                        
                        const historicalYearStart = new Date(year - 1, 0, 1);
                        const historicalYearEnd = new Date(year - 1, 11, 31);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= yearStart && date <= yearEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalYearStart && date <= historicalYearEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(year.toString());
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'custom') {
                    const startDate = new Date(customStartDate);
                    const endDate = new Date(customEndDate);
                    const daysDiff = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                    
                    const historicalStartDate = new Date(startDate);
                    historicalStartDate.setDate(startDate.getDate() - daysDiff - 1);
                    const historicalEndDate = new Date(startDate);
                    historicalEndDate.setDate(startDate.getDate() - 1);
                    
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    const weeks = Math.ceil(daysDiff / 7);
                    for (let i = 0; i < weeks; i++) {
                        const weekStart = new Date(startDate);
                        weekStart.setDate(startDate.getDate() + (i * 7));
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        if (weekEnd > endDate) weekEnd.setTime(endDate.getTime());
                        
                        const historicalWeekStart = new Date(historicalStartDate);
                        historicalWeekStart.setDate(historicalStartDate.getDate() + (i * 7));
                        const historicalWeekEnd = new Date(historicalWeekStart);
                        historicalWeekEnd.setDate(historicalWeekStart.getDate() + 6);
                        if (historicalWeekEnd > historicalEndDate) historicalWeekEnd.setTime(historicalEndDate.getTime());
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= weekStart && date <= weekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalWeekStart && date <= historicalWeekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Week ${i + 1}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                return { labels: [], currentData: [], historicalData: [] };
            };

            const categoryTotals = expenses.reduce((acc, exp) => {
                acc[exp.category] = (acc[exp.category] || 0) + exp.amount;
                return acc;
            }, {});

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Analytics & Insights</h1>
                            <p>Expense trends and comparisons with historical data</p>
                        </div>
                    </div>

                    <div className="chart-container" style={{ marginBottom: '48px' }}>
                        <h3 style={{ marginBottom: '24px', fontSize: '22px', fontWeight: 700 }}>Expense Trend Analysis</h3>
                        
                        <div className="chart-tabs">
                            <button 
                                className={`chart-tab ${chartView === 'weekly' ? 'active' : ''}`}
                                onClick={() => setChartView('weekly')}
                            >
                                Weekly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'monthly' ? 'active' : ''}`}
                                onClick={() => setChartView('monthly')}
                            >
                                Monthly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'quarterly' ? 'active' : ''}`}
                                onClick={() => setChartView('quarterly')}
                            >
                                Quarterly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'yearly' ? 'active' : ''}`}
                                onClick={() => setChartView('yearly')}
                            >
                                Yearly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'custom' ? 'active' : ''}`}
                                onClick={() => setChartView('custom')}
                            >
                                Custom Range
                            </button>
                        </div>

                        {chartView === 'custom' && (
                            <div className="date-range-picker">
                                <div className="date-input-group">
                                    <label className="date-input-label">Start Date</label>
                                    <input 
                                        type="date"
                                        className="form-input"
                                        value={customStartDate}
                                        onChange={(e) => setCustomStartDate(e.target.value)}
                                    />
                                </div>
                                <div className="date-input-group">
                                    <label className="date-input-label">End Date</label>
                                    <input 
                                        type="date"
                                        className="form-input"
                                        value={customEndDate}
                                        onChange={(e) => setCustomEndDate(e.target.value)}
                                    />
                                </div>
                            </div>
                        )}
                        
                        <div style={{ height: '400px', marginTop: '24px' }}>
                            <canvas id="expenseChart"></canvas>
                        </div>
                        
                        <div style={{ marginTop: '24px', padding: '20px', background: 'var(--color-surface-elevated)', borderRadius: 'var(--radius-md)', border: '1px solid var(--color-border)' }}>
                            <p style={{ fontSize: '14px', color: 'var(--color-text-secondary)', lineHeight: '1.7' }}>
                                <strong style={{ color: 'var(--color-primary)' }}>üìä Historical Comparison:</strong> The solid line shows current period expenses, while the dashed line represents 
                                the same timeframe from the previous period (e.g., this week vs. last week, this month vs. last month).
                            </p>
                        </div>
                    </div>

                    <h3 style={{ marginBottom: '24px', fontSize: '22px', fontWeight: 700 }}>Category Breakdown</h3>
                    <div className="stats-grid">
                        {Object.entries(categoryTotals).map(([category, total]) => (
                            <div key={category} className="stat-card">
                                <div className="stat-label">{category}</div>
                                <div className="stat-value" style={{ fontSize: '28px' }}>
                                    ${total.toLocaleString()}
                                </div>
                                <div className="stat-subtext">
                                    {expenses.filter(e => e.category === category).length} expenses
                                </div>
                            </div>
                        ))}
                    </div>
                </>
            );
        };

        const SetupView = ({ expenses, setExpenses }) => {
            const [formData, setFormData] = useState({
                name: '',
                amount: '',
                category: 'Inventory',
                frequency: 'weekly',
                dueDate: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                const newExpense = {
                    id: expenses.length + 1,
                    ...formData,
                    amount: parseFloat(formData.amount),
                    status: 'pending'
                };
                setExpenses([...expenses, newExpense]);
                setFormData({
                    name: '',
                    amount: '',
                    category: 'Inventory',
                    frequency: 'weekly',
                    dueDate: ''
                });
            };

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Expense Setup</h1>
                            <p>Add and configure recurring expenses</p>
                        </div>
                    </div>

                    <div className="widget" style={{ maxWidth: '700px' }}>
                        <h3 style={{ marginBottom: '32px', fontSize: '22px', fontWeight: 700 }}>Add New Expense</h3>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">Expense Name</label>
                                <input 
                                    type="text"
                                    className="form-input"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    required
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Amount ($)</label>
                                <input 
                                    type="number"
                                    className="form-input"
                                    value={formData.amount}
                                    onChange={(e) => setFormData({...formData, amount: e.target.value})}
                                    required
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Category</label>
                                <select 
                                    className="form-select"
                                    value={formData.category}
                                    onChange={(e) => setFormData({...formData, category: e.target.value})}
                                >
                                    <option>Inventory</option>
                                    <option>Utilities</option>
                                    <option>Payroll</option>
                                    <option>Rent</option>
                                    <option>Insurance</option>
                                    <option>Equipment</option>
                                    <option>Marketing</option>
                                    <option>Services</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Frequency</label>
                                <select 
                                    className="form-select"
                                    value={formData.frequency}
                                    onChange={(e) => setFormData({...formData, frequency: e.target.value})}
                                >
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Due Date</label>
                                <input 
                                    type="date"
                                    className="form-input"
                                    value={formData.dueDate}
                                    onChange={(e) => setFormData({...formData, dueDate: e.target.value})}
                                    required
                                />
                            </div>

                            <button type="submit" className="btn btn-primary" style={{ width: '100%', marginTop: '12px' }}>
                                <span>+</span>
                                Add Expense
                            </button>
                        </form>
                    </div>
                </>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>