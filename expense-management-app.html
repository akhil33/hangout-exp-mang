<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Management System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f7f8fa;
            color: #1a1a1a;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            letter-spacing: -0.01em;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 240px;
            background: #ffffff;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            padding: 20px 0;
        }

        .logo {
            padding: 0 24px 24px;
            font-size: 20px;
            font-weight: 700;
            color: #5B5FC7;
        }

        .nav-item {
            padding: 12px 24px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            color: #6b7280;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: #f9fafb;
            color: #1a1a1a;
        }

        .nav-item.active {
            background: #f0f1ff;
            color: #5B5FC7;
            border-left-color: #5B5FC7;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
        }

        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 32px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .header-title {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .header-title h1 {
            font-size: 28px;
            font-weight: 700;
        }

        .header-title p {
            color: #6b7280;
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #5B5FC7;
            color: white;
        }

        .btn-primary:hover {
            background: #4a4eb5;
        }

        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: #f9fafb;
        }

        .view-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            background: white;
            padding: 6px;
            border-radius: 10px;
            width: fit-content;
        }

        .tab {
            padding: 8px 24px;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            transition: all 0.2s;
        }

        .tab.active {
            background: #5B5FC7;
            color: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .stat-label {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-subtext {
            font-size: 13px;
            color: #10b981;
            font-weight: 500;
        }

        .stat-subtext.warning {
            color: #f59e0b;
        }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 32px;
        }

        .widget {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .widget-title {
            font-size: 16px;
            font-weight: 600;
        }

        .widget-amount {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .widget-subtitle {
            font-size: 13px;
            color: #6b7280;
            margin-bottom: 16px;
        }

        .expand-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            color: #6b7280;
            transition: color 0.2s;
        }

        .expand-btn:hover {
            color: #1a1a1a;
        }

        .expense-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f9fafb;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .expense-item:hover {
            background: #f3f4f6;
        }

        .expense-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .expense-name {
            font-weight: 600;
            font-size: 14px;
        }

        .expense-meta {
            font-size: 12px;
            color: #6b7280;
        }

        .expense-amount {
            font-weight: 700;
            font-size: 16px;
        }

        .expense-actions {
            display: flex;
            gap: 8px;
        }

        .badge {
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        .badge-pending {
            background: #dbeafe;
            color: #1e40af;
        }

        .approve-btn {
            padding: 6px 16px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            background: #5B5FC7;
            color: white;
            transition: all 0.2s;
        }

        .approve-btn:hover {
            background: #4a4eb5;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .calendar-day {
            aspect-ratio: 1;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .calendar-day:hover {
            border-color: #5B5FC7;
            background: #f9fafb;
        }

        .calendar-day.has-expense {
            background: #f0f1ff;
            border-color: #5B5FC7;
        }

        .day-number {
            font-weight: 600;
            font-size: 14px;
        }

        .day-amount {
            font-size: 11px;
            color: #5B5FC7;
            font-weight: 600;
        }

        .chart-container {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin-bottom: 32px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #5B5FC7;
            box-shadow: 0 0 0 3px rgba(91, 95, 199, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            background: white;
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: #f9fafb;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .role-indicator {
            padding: 2px 8px;
            background: #5B5FC7;
            color: white;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e5e7eb;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
            padding: 4px 8px;
        }

        .modal-close:hover {
            color: #1a1a1a;
        }

        .chart-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 2px solid #e5e7eb;
            flex-wrap: wrap;
        }

        .chart-tab {
            padding: 12px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .chart-tab.active {
            color: #5B5FC7;
            border-bottom-color: #5B5FC7;
        }

        .chart-tab:hover {
            color: #1a1a1a;
        }

        .date-range-picker {
            display: flex;
            gap: 12px;
            align-items: flex-end;
            margin-bottom: 24px;
            padding: 16px;
            background: #f9fafb;
            border-radius: 8px;
            flex-wrap: wrap;
        }

        .date-input-group {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
            min-width: 150px;
        }

        .date-input-label {
            font-size: 12px;
            font-weight: 600;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Sample expense data with historical data
        const initialExpenses = [
            // January 2026 - Week 1 (Dec 29 - Jan 4)
            { id: 1, name: "Rent Payment", amount: 5000, dueDate: "2026-01-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 2, name: "Liquor Supplier - ABC Distributors", amount: 4200, dueDate: "2026-01-02", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 3, name: "Food Supplier - Fresh Foods Ltd", amount: 3100, dueDate: "2026-01-03", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 4, name: "Staff Payroll", amount: 12000, dueDate: "2026-01-04", category: "Payroll", frequency: "weekly", status: "paid" },
            
            // January 2026 - Week 2 (Jan 5-11) - CURRENT WEEK
            { id: 5, name: "Insurance Premium", amount: 1200, dueDate: "2026-01-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 6, name: "Utilities - Hydro One", amount: 850, dueDate: "2026-01-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 7, name: "Liquor Supplier - ABC Distributors", amount: 4500, dueDate: "2026-01-09", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 8, name: "Food Supplier - Fresh Foods Ltd", amount: 3200, dueDate: "2026-01-10", category: "Inventory", frequency: "weekly", status: "approved" },
            { id: 9, name: "Staff Payroll", amount: 12500, dueDate: "2026-01-11", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // January 2026 - Week 3 (Jan 12-18) - NEXT WEEK
            { id: 10, name: "Cleaning Service", amount: 600, dueDate: "2026-01-12", category: "Services", frequency: "weekly", status: "pending" },
            { id: 11, name: "Liquor Supplier - ABC Distributors", amount: 4300, dueDate: "2026-01-14", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 12, name: "Food Supplier - Fresh Foods Ltd", amount: 3400, dueDate: "2026-01-15", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 13, name: "Equipment Lease", amount: 800, dueDate: "2026-01-15", category: "Equipment", frequency: "monthly", status: "pending" },
            { id: 14, name: "Staff Payroll", amount: 12200, dueDate: "2026-01-18", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // January 2026 - Week 4 (Jan 19-25)
            { id: 15, name: "Marketing - Social Media", amount: 500, dueDate: "2026-01-20", category: "Marketing", frequency: "monthly", status: "pending" },
            { id: 16, name: "Liquor Supplier - ABC Distributors", amount: 4400, dueDate: "2026-01-21", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 17, name: "Food Supplier - Fresh Foods Ltd", amount: 3300, dueDate: "2026-01-22", category: "Inventory", frequency: "weekly", status: "pending" },
            { id: 18, name: "Staff Payroll", amount: 12300, dueDate: "2026-01-25", category: "Payroll", frequency: "weekly", status: "pending" },
            
            // December 2025 - Week 4 (Dec 22-28) - LAST WEEK
            { id: 19, name: "Liquor Supplier - ABC Distributors", amount: 4100, dueDate: "2025-12-23", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 20, name: "Food Supplier - Fresh Foods Ltd", amount: 3000, dueDate: "2025-12-24", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 21, name: "Staff Payroll", amount: 11800, dueDate: "2025-12-27", category: "Payroll", frequency: "weekly", status: "paid" },
            
            // December 2025 - Week 3 (Dec 15-21)
            { id: 22, name: "Liquor Supplier - ABC Distributors", amount: 3900, dueDate: "2025-12-16", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 23, name: "Food Supplier - Fresh Foods Ltd", amount: 2900, dueDate: "2025-12-17", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 24, name: "Staff Payroll", amount: 11500, dueDate: "2025-12-20", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 25, name: "Equipment Maintenance", amount: 450, dueDate: "2025-12-18", category: "Equipment", frequency: "monthly", status: "paid" },
            
            // December 2025 - Week 2 (Dec 8-14)
            { id: 26, name: "Liquor Supplier - ABC Distributors", amount: 4000, dueDate: "2025-12-09", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 27, name: "Food Supplier - Fresh Foods Ltd", amount: 2800, dueDate: "2025-12-10", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 28, name: "Staff Payroll", amount: 11600, dueDate: "2025-12-13", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 29, name: "Utilities - Hydro One", amount: 820, dueDate: "2025-12-08", category: "Utilities", frequency: "monthly", status: "paid" },
            
            // December 2025 - Week 1 (Dec 1-7)
            { id: 30, name: "Rent Payment", amount: 5000, dueDate: "2025-12-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 31, name: "Liquor Supplier - ABC Distributors", amount: 3800, dueDate: "2025-12-02", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 32, name: "Food Supplier - Fresh Foods Ltd", amount: 2700, dueDate: "2025-12-03", category: "Inventory", frequency: "weekly", status: "paid" },
            { id: 33, name: "Staff Payroll", amount: 11400, dueDate: "2025-12-06", category: "Payroll", frequency: "weekly", status: "paid" },
            { id: 34, name: "Insurance Premium", amount: 1200, dueDate: "2025-12-05", category: "Insurance", frequency: "monthly", status: "paid" },
            
            // November 2025 expenses
            { id: 35, name: "Rent Payment", amount: 5000, dueDate: "2025-11-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 36, name: "Insurance Premium", amount: 1200, dueDate: "2025-11-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 37, name: "Utilities - Hydro One", amount: 780, dueDate: "2025-11-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 38, name: "Marketing Campaign", amount: 1500, dueDate: "2025-11-15", category: "Marketing", frequency: "monthly", status: "paid" },
            { id: 39, name: "Equipment Lease", amount: 800, dueDate: "2025-11-15", category: "Equipment", frequency: "monthly", status: "paid" },
            
            // October 2025 expenses
            { id: 40, name: "Rent Payment", amount: 5000, dueDate: "2025-10-01", category: "Rent", frequency: "monthly", status: "paid" },
            { id: 41, name: "Insurance Premium", amount: 1200, dueDate: "2025-10-05", category: "Insurance", frequency: "monthly", status: "paid" },
            { id: 42, name: "Utilities - Hydro One", amount: 760, dueDate: "2025-10-08", category: "Utilities", frequency: "monthly", status: "paid" },
            { id: 43, name: "Equipment Maintenance", amount: 650, dueDate: "2025-10-12", category: "Equipment", frequency: "quarterly", status: "paid" },
        ];

        const App = () => {
            const [currentView, setCurrentView] = useState('dashboard');
            const [userRole, setUserRole] = useState('manager'); // 'manager' or 'staff'
            const [timeView, setTimeView] = useState('weekly'); // 'daily', 'weekly', 'monthly'
            const [expenses, setExpenses] = useState(initialExpenses);
            const [expandedWidgets, setExpandedWidgets] = useState({});
            const [showAddExpenseModal, setShowAddExpenseModal] = useState(false);

            // Redirect staff users away from analytics view
            useEffect(() => {
                if (userRole === 'staff' && currentView === 'analytics') {
                    setCurrentView('dashboard');
                }
            }, [userRole, currentView]);

            const toggleWidget = (widget) => {
                setExpandedWidgets(prev => ({
                    ...prev,
                    [widget]: !prev[widget]
                }));
            };

            const approveExpense = (id) => {
                setExpenses(prev => prev.map(exp =>
                    exp.id === id ? { ...exp, status: 'approved' } : exp
                ));
            };

            const addExpense = (newExpense) => {
                const expense = {
                    id: expenses.length + 1,
                    ...newExpense,
                    status: 'pending'
                };
                setExpenses([...expenses, expense]);
                setShowAddExpenseModal(false);
            };

            const getWeekExpenses = (weekOffset) => {
                const today = new Date('2026-01-10');
                const weekStart = new Date(today);
                weekStart.setDate(today.getDate() - today.getDay() + (weekOffset * 7));
                const weekEnd = new Date(weekStart);
                weekEnd.setDate(weekStart.getDate() + 6);

                return expenses.filter(exp => {
                    const expDate = new Date(exp.dueDate);
                    return expDate >= weekStart && expDate <= weekEnd;
                });
            };

            const lastWeekExpenses = getWeekExpenses(-1);
            const thisWeekExpenses = getWeekExpenses(0);
            const nextWeekExpenses = getWeekExpenses(1);

            const lastWeekPaid = lastWeekExpenses.filter(e => e.status === 'paid');
            const lastWeekTotal = lastWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const lastWeekPaidTotal = lastWeekPaid.reduce((sum, e) => sum + e.amount, 0);
            const thisWeekTotal = thisWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const nextWeekTotal = nextWeekExpenses.reduce((sum, e) => sum + e.amount, 0);
            const pendingApprovals = expenses.filter(e => e.status === 'pending').length;

            return (
                <div className="app-container">
                    <Sidebar
                        currentView={currentView}
                        setCurrentView={setCurrentView}
                        userRole={userRole}
                        setUserRole={setUserRole}
                    />
                    <div className="main-content">
                        {currentView === 'dashboard' && (
                            <Dashboard
                                timeView={timeView}
                                setTimeView={setTimeView}
                                userRole={userRole}
                                expenses={expenses}
                                expandedWidgets={expandedWidgets}
                                toggleWidget={toggleWidget}
                                approveExpense={approveExpense}
                                lastWeekExpenses={lastWeekExpenses}
                                thisWeekExpenses={thisWeekExpenses}
                                nextWeekExpenses={nextWeekExpenses}
                                lastWeekTotal={lastWeekTotal}
                                lastWeekPaidTotal={lastWeekPaidTotal}
                                thisWeekTotal={thisWeekTotal}
                                nextWeekTotal={nextWeekTotal}
                                pendingApprovals={pendingApprovals}
                                onAddExpense={() => setShowAddExpenseModal(true)}
                            />
                        )}
                        {currentView === 'calendar' && (
                            <CalendarView expenses={expenses} />
                        )}
                        {currentView === 'analytics' && userRole === 'manager' && (
                            <AnalyticsView expenses={expenses} />
                        )}
                        {currentView === 'setup' && (
                            <SetupView expenses={expenses} setExpenses={setExpenses} />
                        )}
                    </div>

                    {showAddExpenseModal && (
                        <AddExpenseModal
                            onClose={() => setShowAddExpenseModal(false)}
                            onSubmit={addExpense}
                        />
                    )}
                </div>
            );
        };

        const Sidebar = ({ currentView, setCurrentView, userRole, setUserRole }) => {
            return (
                <div className="sidebar">
                    <div className="logo">üí∞ ExpenseFlow</div>
                    
                    <div style={{ padding: '0 24px 20px' }}>
                        <div className="user-badge">
                            <span>üë§</span>
                            <span>John Doe</span>
                            <span className="role-indicator">
                                {userRole === 'manager' ? 'MANAGER' : 'STAFF'}
                            </span>
                        </div>
                    </div>

                    <div className={`nav-item ${currentView === 'dashboard' ? 'active' : ''}`} 
                         onClick={() => setCurrentView('dashboard')}>
                        <span>üìä</span>
                        <span>Dashboard</span>
                    </div>
                    
                    <div className={`nav-item ${currentView === 'calendar' ? 'active' : ''}`} 
                         onClick={() => setCurrentView('calendar')}>
                        <span>üìÖ</span>
                        <span>Calendar View</span>
                    </div>
                    
                    {userRole === 'manager' && (
                        <div className={`nav-item ${currentView === 'analytics' ? 'active' : ''}`} 
                             onClick={() => setCurrentView('analytics')}>
                            <span>üìà</span>
                            <span>Analytics</span>
                        </div>
                    )}
                    
                    {userRole === 'manager' && (
                        <div className={`nav-item ${currentView === 'setup' ? 'active' : ''}`} 
                             onClick={() => setCurrentView('setup')}>
                            <span>‚öôÔ∏è</span>
                            <span>Setup</span>
                        </div>
                    )}

                    <div style={{ marginTop: 'auto', padding: '20px 24px', borderTop: '1px solid #e5e7eb' }}>
                        <button 
                            className="btn btn-secondary" 
                            style={{ width: '100%' }}
                            onClick={() => setUserRole(userRole === 'manager' ? 'staff' : 'manager')}
                        >
                            Switch to {userRole === 'manager' ? 'Staff' : 'Manager'} View
                        </button>
                    </div>
                </div>
            );
        };

        const Dashboard = ({
            timeView, setTimeView, userRole, expenses,
            expandedWidgets, toggleWidget, approveExpense,
            lastWeekExpenses, thisWeekExpenses, nextWeekExpenses,
            lastWeekTotal, lastWeekPaidTotal, thisWeekTotal, nextWeekTotal,
            pendingApprovals, onAddExpense
        }) => {
            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Expense Dashboard</h1>
                            <p>Manage and track restaurant expenses</p>
                        </div>
                        <div className="header-actions">
                            {userRole === 'manager' && (
                                <button className="btn btn-primary" onClick={onAddExpense}>
                                    <span>+</span>
                                    Add Expense
                                </button>
                            )}
                        </div>
                    </div>

                    <div className="view-tabs">
                        <button 
                            className={`tab ${timeView === 'daily' ? 'active' : ''}`}
                            onClick={() => setTimeView('daily')}
                        >
                            Daily
                        </button>
                        <button 
                            className={`tab ${timeView === 'weekly' ? 'active' : ''}`}
                            onClick={() => setTimeView('weekly')}
                        >
                            Weekly
                        </button>
                        <button 
                            className={`tab ${timeView === 'monthly' ? 'active' : ''}`}
                            onClick={() => setTimeView('monthly')}
                        >
                            Monthly
                        </button>
                    </div>

                    {userRole === 'manager' ? (
                        <>
                            <div className="stats-grid">
                                <div className="stat-card">
                                    <div className="stat-label">Last Week Performance</div>
                                    <div className="stat-value">
                                        ${lastWeekPaidTotal.toLocaleString()} / ${lastWeekTotal.toLocaleString()}
                                    </div>
                                    <div className="stat-subtext">
                                        {lastWeekTotal > 0 ? Math.round((lastWeekPaidTotal / lastWeekTotal) * 100) : 0}% paid on time
                                    </div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">This Week Total</div>
                                    <div className="stat-value">${thisWeekTotal.toLocaleString()}</div>
                                    <div className="stat-subtext">{thisWeekExpenses.length} expenses</div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">Next Week Planned</div>
                                    <div className="stat-value">${nextWeekTotal.toLocaleString()}</div>
                                    <div className="stat-subtext">{nextWeekExpenses.length} expenses</div>
                                </div>

                                <div className="stat-card">
                                    <div className="stat-label">Pending Approvals</div>
                                    <div className="stat-value" style={{ color: '#f59e0b' }}>{pendingApprovals}</div>
                                    <div className="stat-subtext warning">Need attention</div>
                                </div>
                            </div>

                            <div className="widgets-grid">
                                <ExpenseWidget 
                                    title="Last Week vs Paid"
                                    amount={lastWeekPaidTotal}
                                    subtitle={`${lastWeekExpenses.length} expenses`}
                                    expenses={lastWeekExpenses}
                                    expanded={expandedWidgets.lastWeek}
                                    onToggle={() => toggleWidget('lastWeek')}
                                    showApprove={false}
                                    bgColor="#d1fae5"
                                />

                                <ExpenseWidget 
                                    title="This Week Coming Up"
                                    amount={thisWeekTotal}
                                    subtitle={`${thisWeekExpenses.length} expenses`}
                                    expenses={thisWeekExpenses}
                                    expanded={expandedWidgets.thisWeek}
                                    onToggle={() => toggleWidget('thisWeek')}
                                    onApprove={approveExpense}
                                    showApprove={true}
                                    bgColor="#fef3c7"
                                />

                                <ExpenseWidget 
                                    title="Next Week Planned"
                                    amount={nextWeekTotal}
                                    subtitle={`${nextWeekExpenses.length} expenses`}
                                    expenses={nextWeekExpenses}
                                    expanded={expandedWidgets.nextWeek}
                                    onToggle={() => toggleWidget('nextWeek')}
                                    onApprove={approveExpense}
                                    showApprove={true}
                                    bgColor="#dbeafe"
                                />
                            </div>
                        </>
                    ) : (
                        <div className="widgets-grid" style={{ gridTemplateColumns: '1fr' }}>
                            <ExpenseWidget 
                                title="This Week Coming Up"
                                amount={thisWeekTotal}
                                subtitle={`${thisWeekExpenses.length} expenses`}
                                expenses={thisWeekExpenses}
                                expanded={true}
                                onToggle={() => {}}
                                showApprove={false}
                                showStatus={true}
                                bgColor="#fef3c7"
                            />
                        </div>
                    )}
                </>
            );
        };

        const ExpenseWidget = ({ 
            title, amount, subtitle, expenses, expanded, onToggle, 
            onApprove, showApprove, showStatus, bgColor 
        }) => {
            return (
                <div className="widget" style={{ background: expanded ? 'white' : bgColor }}>
                    <div className="widget-header">
                        <div className="widget-title">{title}</div>
                        <button className="expand-btn" onClick={onToggle}>
                            {expanded ? '‚ñ≤' : '‚ñº'}
                        </button>
                    </div>
                    <div className="widget-amount">${amount.toLocaleString()}</div>
                    <div className="widget-subtitle">{subtitle}</div>

                    {expanded && (
                        <div className="expense-list">
                            {expenses.length === 0 ? (
                                <div style={{ textAlign: 'center', color: '#6b7280', padding: '20px' }}>
                                    No expenses for this period
                                </div>
                            ) : (
                                expenses.map(expense => (
                                    <div key={expense.id} className="expense-item">
                                        <div className="expense-info">
                                            <div className="expense-name">{expense.name}</div>
                                            <div className="expense-meta">
                                                {expense.category} ‚Ä¢ Due {new Date(expense.dueDate).toLocaleDateString()}
                                            </div>
                                        </div>
                                        <div className="expense-actions">
                                            <div className="expense-amount">${expense.amount.toLocaleString()}</div>
                                            {showStatus && (
                                                <span className={`badge ${
                                                    expense.status === 'approved' ? 'badge-success' : 
                                                    expense.status === 'paid' ? 'badge-success' : 
                                                    'badge-pending'
                                                }`}>
                                                    {expense.status === 'approved' ? '‚úì Approved' : 
                                                     expense.status === 'paid' ? '‚úì Paid' : 
                                                     'Pending'}
                                                </span>
                                            )}
                                            {showApprove && expense.status === 'pending' && (
                                                <button 
                                                    className="approve-btn"
                                                    onClick={() => onApprove(expense.id)}
                                                >
                                                    Approve
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                ))
                            )}
                        </div>
                    )}
                </div>
            );
        };

        const CalendarView = ({ expenses }) => {
            const [currentMonth] = useState(new Date('2026-01-01'));
            const [selectedDay, setSelectedDay] = useState(null);
            
            const getDaysInMonth = () => {
                const year = currentMonth.getFullYear();
                const month = currentMonth.getMonth();
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const days = [];
                
                // Add empty cells for days before the first day of the month
                const firstDayOfWeek = firstDay.getDay();
                for (let i = 0; i < firstDayOfWeek; i++) {
                    days.push(null);
                }
                
                for (let i = 1; i <= lastDay.getDate(); i++) {
                    const date = new Date(year, month, i);
                    const dateStr = date.toISOString().split('T')[0];
                    const dayExpenses = expenses.filter(e => e.dueDate === dateStr);
                    const total = dayExpenses.reduce((sum, e) => sum + e.amount, 0);
                    
                    days.push({
                        date: i,
                        fullDate: dateStr,
                        expenses: dayExpenses,
                        total
                    });
                }
                
                return days;
            };

            const days = getDaysInMonth();
            const weekDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Calendar View</h1>
                            <p>January 2026</p>
                        </div>
                    </div>

                    <div className="calendar-grid">
                        {weekDays.map(day => (
                            <div key={day} style={{ 
                                fontWeight: 600, 
                                padding: '12px',
                                textAlign: 'center',
                                color: '#6b7280'
                            }}>
                                {day}
                            </div>
                        ))}
                        
                        {days.map((day, index) => (
                            day ? (
                                <div 
                                    key={index} 
                                    className={`calendar-day ${day.expenses.length > 0 ? 'has-expense' : ''}`}
                                    onClick={() => day.expenses.length > 0 && setSelectedDay(day)}
                                    style={{ cursor: day.expenses.length > 0 ? 'pointer' : 'default' }}
                                >
                                    <div className="day-number">{day.date}</div>
                                    {day.total > 0 && (
                                        <>
                                            <div className="day-amount">${day.total.toLocaleString()}</div>
                                            <div style={{ fontSize: '10px', color: '#6b7280' }}>
                                                {day.expenses.length} item{day.expenses.length > 1 ? 's' : ''}
                                            </div>
                                        </>
                                    )}
                                </div>
                            ) : (
                                <div key={index} style={{ padding: '12px' }}></div>
                            )
                        ))}
                    </div>

                    {selectedDay && (
                        <div className="modal-overlay" onClick={() => setSelectedDay(null)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <div className="modal-header">
                                    <div>
                                        <div className="modal-title">
                                            {new Date(selectedDay.fullDate).toLocaleDateString('en-US', { 
                                                weekday: 'long', 
                                                year: 'numeric', 
                                                month: 'long', 
                                                day: 'numeric' 
                                            })}
                                        </div>
                                        <p style={{ color: '#6b7280', marginTop: '8px' }}>
                                            Total: ${selectedDay.total.toLocaleString()}
                                        </p>
                                    </div>
                                    <button className="modal-close" onClick={() => setSelectedDay(null)}>
                                        √ó
                                    </button>
                                </div>
                                
                                <div className="expense-list">
                                    {selectedDay.expenses.map(expense => (
                                        <div key={expense.id} className="expense-item">
                                            <div className="expense-info">
                                                <div className="expense-name">{expense.name}</div>
                                                <div className="expense-meta">
                                                    {expense.category} ‚Ä¢ {expense.frequency}
                                                </div>
                                            </div>
                                            <div className="expense-actions">
                                                <div className="expense-amount">${expense.amount.toLocaleString()}</div>
                                                <span className={`badge ${
                                                    expense.status === 'approved' ? 'badge-success' : 
                                                    expense.status === 'paid' ? 'badge-success' : 
                                                    'badge-pending'
                                                }`}>
                                                    {expense.status === 'approved' ? '‚úì Approved' : 
                                                     expense.status === 'paid' ? '‚úì Paid' : 
                                                     'Pending'}
                                                </span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </>
            );
        };

        const AnalyticsView = ({ expenses }) => {
            const [chartView, setChartView] = useState('weekly'); // 'weekly', 'monthly', 'quarterly', 'yearly', 'custom'
            const [customStartDate, setCustomStartDate] = useState('2026-01-01');
            const [customEndDate, setCustomEndDate] = useState('2026-01-31');
            const [chartInstance, setChartInstance] = useState(null);

            useEffect(() => {
                const ctx = document.getElementById('expenseChart');
                if (ctx) {
                    // Destroy existing chart
                    if (chartInstance) {
                        chartInstance.destroy();
                    }

                    const { labels, currentData, historicalData } = getChartData();

                    const newChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [
                                {
                                    label: 'Current Period',
                                    data: currentData,
                                    borderColor: '#5B5FC7',
                                    backgroundColor: 'rgba(91, 95, 199, 0.1)',
                                    tension: 0.4,
                                    fill: true,
                                    borderWidth: 3
                                },
                                {
                                    label: 'Historical Comparison',
                                    data: historicalData,
                                    borderColor: '#9ca3af',
                                    backgroundColor: 'rgba(156, 163, 175, 0.1)',
                                    tension: 0.4,
                                    fill: true,
                                    borderWidth: 2,
                                    borderDash: [5, 5]
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: true,
                                    position: 'top'
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        callback: function(value) {
                                            return '$' + value.toLocaleString();
                                        }
                                    }
                                }
                            }
                        }
                    });
                    
                    setChartInstance(newChart);
                }

                return () => {
                    if (chartInstance) {
                        chartInstance.destroy();
                    }
                };
            }, [chartView, customStartDate, customEndDate]);

            const getChartData = () => {
                const today = new Date('2026-01-10');
                
                if (chartView === 'weekly') {
                    // Last 8 weeks
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 7; i >= 0; i--) {
                        const weekStart = new Date(today);
                        weekStart.setDate(today.getDate() - today.getDay() - (i * 7));
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        
                        const historicalWeekStart = new Date(weekStart);
                        historicalWeekStart.setDate(weekStart.getDate() - 7);
                        const historicalWeekEnd = new Date(historicalWeekStart);
                        historicalWeekEnd.setDate(historicalWeekStart.getDate() + 6);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= weekStart && date <= weekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalWeekStart && date <= historicalWeekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Week ${8-i}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'monthly') {
                    // Last 6 months
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 5; i >= 0; i--) {
                        const monthDate = new Date(today);
                        monthDate.setMonth(today.getMonth() - i);
                        const year = monthDate.getFullYear();
                        const month = monthDate.getMonth();
                        
                        const historicalMonthDate = new Date(monthDate);
                        historicalMonthDate.setFullYear(year - 1);
                        
                        const monthStart = new Date(year, month, 1);
                        const monthEnd = new Date(year, month + 1, 0);
                        
                        const historicalMonthStart = new Date(year - 1, month, 1);
                        const historicalMonthEnd = new Date(year - 1, month + 1, 0);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= monthStart && date <= monthEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalMonthStart && date <= historicalMonthEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(monthDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }));
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'quarterly') {
                    // Last 4 quarters
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 3; i >= 0; i--) {
                        const quarterDate = new Date(today);
                        const currentQuarter = Math.floor(today.getMonth() / 3);
                        const targetQuarter = currentQuarter - i;
                        
                        let year = today.getFullYear();
                        let quarter = targetQuarter;
                        
                        while (quarter < 0) {
                            quarter += 4;
                            year -= 1;
                        }
                        
                        const quarterStart = new Date(year, quarter * 3, 1);
                        const quarterEnd = new Date(year, (quarter + 1) * 3, 0);
                        
                        const historicalQuarterStart = new Date(year - 1, quarter * 3, 1);
                        const historicalQuarterEnd = new Date(year - 1, (quarter + 1) * 3, 0);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= quarterStart && date <= quarterEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalQuarterStart && date <= historicalQuarterEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Q${quarter + 1} ${year}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'yearly') {
                    // Last 3 years
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    for (let i = 2; i >= 0; i--) {
                        const year = today.getFullYear() - i;
                        const yearStart = new Date(year, 0, 1);
                        const yearEnd = new Date(year, 11, 31);
                        
                        const historicalYearStart = new Date(year - 1, 0, 1);
                        const historicalYearEnd = new Date(year - 1, 11, 31);
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= yearStart && date <= yearEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalYearStart && date <= historicalYearEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(year.toString());
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                if (chartView === 'custom') {
                    const startDate = new Date(customStartDate);
                    const endDate = new Date(customEndDate);
                    const daysDiff = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));
                    
                    const historicalStartDate = new Date(startDate);
                    historicalStartDate.setDate(startDate.getDate() - daysDiff - 1);
                    const historicalEndDate = new Date(startDate);
                    historicalEndDate.setDate(startDate.getDate() - 1);
                    
                    // Break into weeks for display
                    const labels = [];
                    const currentData = [];
                    const historicalData = [];
                    
                    const weeks = Math.ceil(daysDiff / 7);
                    for (let i = 0; i < weeks; i++) {
                        const weekStart = new Date(startDate);
                        weekStart.setDate(startDate.getDate() + (i * 7));
                        const weekEnd = new Date(weekStart);
                        weekEnd.setDate(weekStart.getDate() + 6);
                        if (weekEnd > endDate) weekEnd.setTime(endDate.getTime());
                        
                        const historicalWeekStart = new Date(historicalStartDate);
                        historicalWeekStart.setDate(historicalStartDate.getDate() + (i * 7));
                        const historicalWeekEnd = new Date(historicalWeekStart);
                        historicalWeekEnd.setDate(historicalWeekStart.getDate() + 6);
                        if (historicalWeekEnd > historicalEndDate) historicalWeekEnd.setTime(historicalEndDate.getTime());
                        
                        const currentTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= weekStart && date <= weekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        const historicalTotal = expenses
                            .filter(e => {
                                const date = new Date(e.dueDate);
                                return date >= historicalWeekStart && date <= historicalWeekEnd;
                            })
                            .reduce((sum, e) => sum + e.amount, 0);
                        
                        labels.push(`Week ${i + 1}`);
                        currentData.push(currentTotal);
                        historicalData.push(historicalTotal);
                    }
                    
                    return { labels, currentData, historicalData };
                }
                
                return { labels: [], currentData: [], historicalData: [] };
            };

            const categoryTotals = expenses.reduce((acc, exp) => {
                acc[exp.category] = (acc[exp.category] || 0) + exp.amount;
                return acc;
            }, {});

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Analytics & Insights</h1>
                            <p>Expense trends and comparisons with historical data</p>
                        </div>
                    </div>

                    <div className="chart-container" style={{ marginBottom: '32px' }}>
                        <h3 style={{ marginBottom: '20px' }}>Expense Trend Analysis</h3>
                        
                        <div className="chart-tabs">
                            <button 
                                className={`chart-tab ${chartView === 'weekly' ? 'active' : ''}`}
                                onClick={() => setChartView('weekly')}
                            >
                                Weekly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'monthly' ? 'active' : ''}`}
                                onClick={() => setChartView('monthly')}
                            >
                                Monthly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'quarterly' ? 'active' : ''}`}
                                onClick={() => setChartView('quarterly')}
                            >
                                Quarterly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'yearly' ? 'active' : ''}`}
                                onClick={() => setChartView('yearly')}
                            >
                                Yearly
                            </button>
                            <button 
                                className={`chart-tab ${chartView === 'custom' ? 'active' : ''}`}
                                onClick={() => setChartView('custom')}
                            >
                                Custom Range
                            </button>
                        </div>

                        {chartView === 'custom' && (
                            <div className="date-range-picker">
                                <div className="date-input-group">
                                    <label className="date-input-label">Start Date</label>
                                    <input 
                                        type="date"
                                        className="form-input"
                                        value={customStartDate}
                                        onChange={(e) => setCustomStartDate(e.target.value)}
                                    />
                                </div>
                                <div className="date-input-group">
                                    <label className="date-input-label">End Date</label>
                                    <input 
                                        type="date"
                                        className="form-input"
                                        value={customEndDate}
                                        onChange={(e) => setCustomEndDate(e.target.value)}
                                    />
                                </div>
                            </div>
                        )}
                        
                        <div style={{ height: '350px', marginTop: '20px' }}>
                            <canvas id="expenseChart"></canvas>
                        </div>
                        
                        <div style={{ marginTop: '16px', padding: '16px', background: '#f9fafb', borderRadius: '8px' }}>
                            <p style={{ fontSize: '14px', color: '#6b7280', lineHeight: '1.6' }}>
                                <strong>üìä Comparison:</strong> The solid line shows the current period expenses, while the dashed line represents 
                                the same timeframe from the previous period (e.g., this week vs. last week, this month vs. last month).
                            </p>
                        </div>
                    </div>

                    <h3 style={{ marginBottom: '20px', fontSize: '20px' }}>Category Breakdown</h3>
                    <div className="stats-grid">
                        {Object.entries(categoryTotals).map(([category, total]) => (
                            <div key={category} className="stat-card">
                                <div className="stat-label">{category}</div>
                                <div className="stat-value" style={{ fontSize: '24px' }}>
                                    ${total.toLocaleString()}
                                </div>
                                <div className="stat-subtext">
                                    {expenses.filter(e => e.category === category).length} expenses
                                </div>
                            </div>
                        ))}
                    </div>
                </>
            );
        };

        const SetupView = ({ expenses, setExpenses }) => {
            const [formData, setFormData] = useState({
                name: '',
                amount: '',
                category: 'Inventory',
                frequency: 'weekly',
                dueDate: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                const newExpense = {
                    id: expenses.length + 1,
                    ...formData,
                    amount: parseFloat(formData.amount),
                    status: 'pending'
                };
                setExpenses([...expenses, newExpense]);
                setFormData({
                    name: '',
                    amount: '',
                    category: 'Inventory',
                    frequency: 'weekly',
                    dueDate: ''
                });
            };

            return (
                <>
                    <div className="header">
                        <div className="header-title">
                            <h1>Expense Setup</h1>
                            <p>Add and configure recurring expenses</p>
                        </div>
                    </div>

                    <div className="widget" style={{ maxWidth: '600px' }}>
                        <h3 style={{ marginBottom: '24px' }}>Add New Expense</h3>
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">Expense Name</label>
                                <input 
                                    type="text"
                                    className="form-input"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    required
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Amount ($)</label>
                                <input 
                                    type="number"
                                    className="form-input"
                                    value={formData.amount}
                                    onChange={(e) => setFormData({...formData, amount: e.target.value})}
                                    required
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Category</label>
                                <select 
                                    className="form-select"
                                    value={formData.category}
                                    onChange={(e) => setFormData({...formData, category: e.target.value})}
                                >
                                    <option>Inventory</option>
                                    <option>Utilities</option>
                                    <option>Payroll</option>
                                    <option>Rent</option>
                                    <option>Insurance</option>
                                    <option>Equipment</option>
                                    <option>Marketing</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Frequency</label>
                                <select 
                                    className="form-select"
                                    value={formData.frequency}
                                    onChange={(e) => setFormData({...formData, frequency: e.target.value})}
                                >
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="yearly">Yearly</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Due Date</label>
                                <input 
                                    type="date"
                                    className="form-input"
                                    value={formData.dueDate}
                                    onChange={(e) => setFormData({...formData, dueDate: e.target.value})}
                                    required
                                />
                            </div>

                            <button type="submit" className="btn btn-primary" style={{ width: '100%' }}>
                                Add Expense
                            </button>
                        </form>
                    </div>
                </>
            );
        };

        const AddExpenseModal = ({ onClose, onSubmit }) => {
            const [formData, setFormData] = useState({
                name: '',
                amount: '',
                category: 'Inventory',
                frequency: 'weekly',
                dueDate: ''
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onSubmit({
                    ...formData,
                    amount: parseFloat(formData.amount)
                });
            };

            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <div className="modal-header">
                            <div className="modal-title">Add New Expense</div>
                            <button className="modal-close" onClick={onClose}>
                                √ó
                            </button>
                        </div>

                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">Expense Name</label>
                                <input
                                    type="text"
                                    className="form-input"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    required
                                    placeholder="e.g., Liquor Supplier - ABC Distributors"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Amount ($)</label>
                                <input
                                    type="number"
                                    className="form-input"
                                    value={formData.amount}
                                    onChange={(e) => setFormData({...formData, amount: e.target.value})}
                                    required
                                    placeholder="0.00"
                                    step="0.01"
                                    min="0"
                                />
                            </div>

                            <div className="form-group">
                                <label className="form-label">Category</label>
                                <select
                                    className="form-select"
                                    value={formData.category}
                                    onChange={(e) => setFormData({...formData, category: e.target.value})}
                                >
                                    <option>Inventory</option>
                                    <option>Utilities</option>
                                    <option>Payroll</option>
                                    <option>Rent</option>
                                    <option>Insurance</option>
                                    <option>Equipment</option>
                                    <option>Marketing</option>
                                    <option>Services</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Frequency</label>
                                <select
                                    className="form-select"
                                    value={formData.frequency}
                                    onChange={(e) => setFormData({...formData, frequency: e.target.value})}
                                >
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="quarterly">Quarterly</option>
                                    <option value="yearly">Yearly</option>
                                    <option value="one-time">One-time</option>
                                </select>
                            </div>

                            <div className="form-group">
                                <label className="form-label">Due Date</label>
                                <input
                                    type="date"
                                    className="form-input"
                                    value={formData.dueDate}
                                    onChange={(e) => setFormData({...formData, dueDate: e.target.value})}
                                    required
                                />
                            </div>

                            <div style={{ display: 'flex', gap: '12px', marginTop: '24px' }}>
                                <button type="button" className="btn btn-secondary" onClick={onClose} style={{ flex: 1 }}>
                                    Cancel
                                </button>
                                <button type="submit" className="btn btn-primary" style={{ flex: 1 }}>
                                    Add Expense
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>